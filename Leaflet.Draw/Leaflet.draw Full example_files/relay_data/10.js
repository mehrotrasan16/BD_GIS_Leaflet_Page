(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{253:function(e,t,n){"use strict";var r=n(0),a=n.n(r),l=n(273);t.a=function(e){var t=e.text,n=e.cb,r=e.icon,i=void 0===r?null:r,o=e.className,c=void 0===o?"":o;return a.a.createElement(l.a,{variant:"contained",size:"large",onClick:n,className:c+" primary",type:"submit"},i,t)}},285:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){var t=e.messages,n=e.addMessagesAction,r=e.channel,a=t[0],l=a&&a.id,i=a&&a.bucket;r.push("load_messages",{last_seen_id:l,bucket:i}).receive("ok",function(e){var t=e.messages,r=e.paginable;return n({messages:t,paginable:r})}).receive("error",function(e){"rate_limited"===e.reason&&displayRateLimitedToast()})}},286:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),a=function(){var e=r.useState(999),t=e[0],n=e[1],a=r.useState(0),l=a[0],i=a[1];return{onInputHeightChange:r.useCallback(function(e){e<t?n(e):i(e-t)},[t]),chatBodyOffset:l}}},287:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},l=r.lazy(function(){return Promise.all([n.e(18),n.e(19)]).then(n.bind(null,338))}),i=function(){var e=r.useState(!1),t=e[0],n=e[1],i=r.useRef(),c=r.useRef();r.useEffect(function(){t||(c.current=void 0)},[t]);var s=r.useCallback(function(e){n(!0),i.current=e},[t,i]),u=r.useCallback(function(e){if(t){if(!e)return n(!1);c.current||(c.current=document.getElementsByClassName("emoji-mart")[0]);var r=c.current.getBoundingClientRect(),a=r.bottom,l=r.top,i=r.left,o=r.right,s=e.clientX,u=e.clientY;s>i&&s<o&&u>l&&u<a||n(!1)}},[t,c]);return{renderPicker:r.useCallback(function(){return t&&r.createElement(r.Suspense,{fallback:null},r.createElement(l,{style:a({visibility:t?"visible":"hidden"},o.emoji_picker),onClick:i.current}))},[t,i]),isPickerOpen:t,closePicker:u,openPicker:s}},o={emoji_picker:{position:"absolute",right:20,bottom:60,height:260,width:260,overflow:"hidden",fontFamily:"Roboto",fontSize:14}}},308:function(e,t,n){"use strict";var r=n(0),a=n.n(r),l=n(236),i=n(319),o=n(320),c=n(321),s=n.n(c),u=n(253),d=function(e){var t=e.closeModal,n=e.editCb,r=e.deleteCb;return a.a.createElement(a.a.Fragment,null,a.a.createElement(u.a,{text:"Edit",className:"edit",cb:n}),a.a.createElement(u.a,{text:"Delete",className:"delete",cb:r}),a.a.createElement(u.a,{text:"Cancel",className:"cancel",cb:t}))},f={content:{background:n(8).a,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",zIndex:1,overFlowX:"hidden"}},p=n(306),m=n(26),g=n(3),h=n(103),b=n(106),v=function(e){var t=e.messages,n=e.scrolledDown,a=e.scrollToVisible,l=e.changeHeight,i=e.channel,c=e.openPicker,u=e.closePicker,v=e.isPickerOpen,y=r.useState(null),k=y[0],E=y[1],O=r.useState({}),C=O[0],w=O[1],j=function(){var e=r.useState(!1),t=e[0],n=e[1];return{isModalOpen:t,closeModal:r.useCallback(function(){return n(!1)},[]),openModal:r.useCallback(function(){return n(!1)},[])}}(),x=j.isModalOpen,P=j.closeModal,M=j.openModal,R=r.useCallback(function(e){return E(e)},[]),S=r.useCallback(function(){return E(null)},[]);r.useEffect(function(){if(k){var e=document.getElementsByClassName("relay-escape-editing")[0];e&&a(e)}},[k]);var T=r.useCallback(function(e){var t=e.mine,n=e.id,r=e.bucket;t&&g.b&&n!==k&&(M(),E(n),w({id:n,bucket:r}))},[k]),_=r.useCallback(function(){P(),E(null),w({})},[]),z=r.useCallback(function(){return t.map(function(e,a){var l=t[a-1],o=!0;l&&l.user&&l.user.username===e.user.username&&e.inserted_at-l.inserted_at<6e4&&(o=!1);var s=r.createElement(p.a,{key:a,message:e,openEdit:R,closeEdit:S,openPicker:c,closePicker:u,isPickerOpen:v,isBeingEdited:e.id&&e.id===k,hasHeading:o,channel:i,onClick:T});return n?s:r.createElement("div",{style:{opacity:0},key:a},s)})},[t,i,k,n]),H=r.useCallback(function(){var e=C.id,t=C.bucket;i&&i.push("delete_message",{id:e,bucket:t}).receive("ok",function(e){Object.keys(e).length>0&&("/chat"===location.pathname?Object(h.c)(e):Object(b.b)(e)),w({})}).receive("error",function(e){"rate_limited"===e.reason&&Object(m.f)()}),P()},[i,location,C]);return r.createElement(r.Fragment,null,r.createElement(o.ReactHeight,{onHeightReady:l},z()),r.createElement(s.a,{isOpen:x,closeModal:_,shouldCloseOnOverlayClick:!0,onRequestClose:_,style:f},r.createElement(d,{closeModal:_,editCb:P,deleteCb:H})))},y=n(483),k=n(104),E=n.n(k),O={container:{height:40,width:40,display:"flex",alignItems:"center",justifyContent:"center",position:"fixed",bottom:70,right:20,backgroundColor:"#D7D7D8",borderRadius:20,opacity:.8},last_page:{height:30,width:30,color:"#747477"},last_page_wrapper:{padding:0,boxShadow:"none",height:"auto",width:"auto"}},C=function(e){var t=e.cb;return r.createElement("div",{style:O.container},r.createElement(y.a,{style:O.last_page_wrapper,onClick:t},r.createElement(E.a,{style:O.last_page})))},w={container:{height:40,width:150,left:120,display:"flex",alignItems:"center",justifyContent:"center",position:"fixed",bottom:70,backgroundColor:"#D7D7D8",borderRadius:10,opacity:.9,cursor:"pointer"},text:{fontSize:14,display:"flex",alignItems:"center"}},j=function(e){var t=e.cb;return a.a.createElement("div",{style:w.container,onClick:t},a.a.createElement("p",{style:w.text},"New Messages ",a.a.createElement(E.a,null)))},x=n(283),P=n(96),M=function(){return(M=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},R=function(e){return e.scrollHeight-e.scrollTop-e.clientHeight},S={cursor:"default",paddingTop:0,overflowY:"scroll",overflowX:"hidden"};t.a=Object(i.a)(function(e){var t=e.messages,n=e.offset,a=e.paginable,i=e.addMessages,o=e.location,c=e.channel,s=e.openPicker,u=e.closePicker,d=e.isPickerOpen,f=Object(x.a)(t),p=Object(x.a)(n),m=r.useState(!1),h=m[0],b=m[1],y=r.useState(!1),k=y[0],E=y[1],O=r.useState(!1),w=O[0],T=O[1],_=r.useState(!1),z=_[0],H=_[1],I=r.useRef(null),N=r.useRef(),L=r.useRef(),B=r.useRef(),D=r.useCallback(function(){var e=L.current;if(e){N.current=e.scrollHeight-e.scrollTop;var n=o.pathname;a&&e&&e.scrollTop<250&&!z&&w&&("/direct_chat"===n||t.length<1e3)&&(i(),H(!0)),e instanceof HTMLElement&&(R(e)>1e3?b(!0):b(!1),R(e)<300&&E(!1))}},[w,a,z,i,o,t]),W=r.useRef(Object(l.a)(D,20));r.useEffect(function(){return W.current=Object(l.a)(D,20),L.current&&L.current.addEventListener("scroll",W.current),function(){L.current&&L.current.removeEventListener("scroll",W.current)}},[D,L]),r.useEffect(function(){B.current=new MutationObserver(function(e){L.current=document.getElementsByClassName("simplebar-content-wrapper")[0],B.current&&B.current.disconnect(),A()}),I.current&&B.current.observe(I.current,{childList:!0})},[]);var V=r.useCallback(function(e){var t=L.current;if(t){var n=t.getBoundingClientRect().bottom;return e.getBoundingClientRect().bottom-n}},[]),A=r.useCallback(function(){var e=L.current;e&&(e&&e.scroll({top:e.scrollHeight}),!w&&T(!0))},[w]),F=r.useCallback(function(e){var t=L.current;if(t){var n=V(e);if(n&&n>0){var r=t.scrollTop;setTimeout(function(){return t.scrollTop=r+n+15})}}},[]);r.useEffect(function(){var e=L.current;if(t&&f){Math.abs(t.length-f.length)>1&&H(!1);var n=t[t.length-1];t.length===f.length+1&&e&&e instanceof HTMLElement&&R(e)>300&&!n.mine?E(!0):!f.length&&t.length?A():f.length<t.length&&U()&&A()}},[t]);var U=function(){var e=L.current;return e&&e instanceof HTMLElement&&e.offsetHeight+e.scrollTop>=e.scrollHeight-400};r.useEffect(function(){var e=L.current;e&&e.scroll(0,e.scrollTop+n-(p||0)+10)},[n]);var X=r.useCallback(function(e){N.current&&L.current&&L.current.scrollTop<250&&(L.current.scrollTop=e-N.current)},[]);return r.createElement("div",{style:M({},P.b,S,{paddingBottom:n}),ref:I,"data-simplebar":!0,id:"relay-chat-body",className:g.b?"mobile":"desktop"},r.createElement(v,{scrolledDown:w,scrollToVisible:F,changeHeight:X,messages:t,channel:c,openPicker:s,closePicker:u,isPickerOpen:d}),h&&r.createElement(C,{cb:A}),k&&r.createElement(j,{cb:A}))})},309:function(e,t,n){"use strict";var r=n(0),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=r.createContext&&r.createContext(a),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n};function c(e){return function(t){return r.createElement(s,i({attr:i({},e.attr)},t),function e(t){return t&&t.map(function(t,n){return r.createElement(t.tag,i({key:n},t.attr),e(t.child))})}(e.child))}}function s(e){var t=function(t){var n,a=e.size||t.size||"1em";t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className);var l=e.attr,c=e.title,s=o(e,["attr","title"]);return r.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,s,{className:n,style:i({color:e.color||t.color},t.style,e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),c&&r.createElement("title",null,c),e.children)};return void 0!==l?r.createElement(l.Consumer,null,function(e){return t(e)}):t(a)}n.d(t,"a",function(){return c})},355:function(e,t,n){"use strict";var r=n(98);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),l=(0,r(n(144)).default)(a.default.createElement(a.default.Fragment,null,a.default.createElement("path",{transform:"scale(1.2, 1.2)",fill:"none",d:"M0 0h20v20H0V0z"}),a.default.createElement("path",{transform:"scale(1.2, 1.2)",d:"M15.95 10.78c.03-.25.05-.51.05-.78s-.02-.53-.06-.78l1.69-1.32c.15-.12.19-.34.1-.51l-1.6-2.77c-.1-.18-.31-.24-.49-.18l-1.99.8c-.42-.32-.86-.58-1.35-.78L12 2.34c-.03-.2-.2-.34-.4-.34H8.4c-.2 0-.36.14-.39.34l-.3 2.12c-.49.2-.94.47-1.35.78l-1.99-.8c-.18-.07-.39 0-.49.18l-1.6 2.77c-.1.18-.06.39.1.51l1.69 1.32c-.04.25-.07.52-.07.78s.02.53.06.78L2.37 12.1c-.15.12-.19.34-.1.51l1.6 2.77c.1.18.31.24.49.18l1.99-.8c.42.32.86.58 1.35.78l.3 2.12c.04.2.2.34.4.34h3.2c.2 0 .37-.14.39-.34l.3-2.12c.49-.2.94-.47 1.35-.78l1.99.8c.18.07.39 0 .49-.18l1.6-2.77c.1-.18.06-.39-.1-.51l-1.67-1.32zM10 13c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z"})),"Settings");t.default=l},356:function(e,t,n){"use strict";var r=n(98);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),l=(0,r(n(144)).default)(a.default.createElement("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z"}),"Bookmark");t.default=l},357:function(e,t,n){"use strict";var r=n(98);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),l=(0,r(n(144)).default)(a.default.createElement("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"}),"Email");t.default=l},358:function(e,t,n){"use strict";var r=n(98);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),l=(0,r(n(144)).default)(a.default.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");t.default=l},359:function(e,t,n){"use strict";var r=n(98);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),l=(0,r(n(144)).default)(a.default.createElement("path",{d:"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67zM11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8z"}),"Whatshot");t.default=l},486:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(41),l=n(319),i=n(483),o=n(355),c=n.n(o),s=n(356),u=n.n(s),d=n(101),f=n(8),p={boxShadow:"none",padding:0,height:"100%",width:35,display:"flex",justifyContent:"center",alignItems:"center"},m={color:f.e},g={color:f.d},h=n(3),b=function(e){var t=e.pinned,n=e.pinRoom,a=e.goToScene;return h.b&&d.a?r.createElement(i.a,{style:p,onClick:a.bind(null,"settings"),title:"settings"},r.createElement(c.a,{id:"settings-button",style:m})):r.createElement(i.a,{id:"channel-bookmark-wrapper",style:p,onClick:n,title:"bookmark"},r.createElement(u.a,{id:"channel-bookmark",style:t?g:m}))},v=n(359),y=n.n(v),k=n(309),E=function(e){return Object(k.a)({tag:"svg",attr:{viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 1.2V2l.5 1L6 6H2.2c-.44 0-.67.53-.34.86L5 10l-4 5 5-4 3.14 3.14a.5.5 0 0 0 .86-.34V10l3-4.5 1 .5h.8c.44 0 .67-.53.34-.86L10.86.86a.5.5 0 0 0-.86.34z"}}]})(e)};E.displayName="GoPin";var O=n(269),C={popup:{backgroundColor:f.h,color:f.b,position:"absolute",opacity:1,borderRadius:3,paddingTop:2,paddingBottom:2,zIndex:1001,display:"flex",flexDirection:"column",right:20,top:50}},w=function(e){var t=e.goToInbox,n=e.goToShare,a=e.goToSettings,l=e.unread;return r.createElement("div",{style:C.popup,className:"relay-popup"},r.createElement(O.a,{label:"Inbox",classNames:l?["green"]:[],cb:t}),r.createElement(O.a,{label:"Share",cb:n}),r.createElement(O.a,{label:"Settings",cb:a}))},j={numHere:{fontSize:14,color:f.e,marginTop:4}},x=function(e){var t,n=e.numOnline,a=e.numOnlineRelayWide;return d.a?null:(n?t=n+" online on this site":a&&(t=a+" online across Relay"),t?r.createElement("p",{style:j.numHere},t):null)},P=n(273),M={button:{fontSize:16,color:f.e,textTransform:"lowercase",paddingLeft:10,paddingRight:10}},R=function(e){var t=e.label,n=e.cb;return r.createElement(P.a,{id:"relay-auth-nav-link",onClick:n,style:M.button},t)},S=n(12),T=n(10),_=n(96),z=n(249),H=n(357),I=n.n(H),N=n(358),L=n.n(N),B=function(e){var t=e.loggedIn,n=e.numUnread,a=e.onClick,l=e.authOnClick;return t?r.createElement("div",{style:{position:"relative",height:"100%",left:h.b?-4:"initial"}},r.createElement(i.a,{style:p,onClick:a,title:"menu",id:h.b?"mobile-menu-wrapper":""},h.b||d.a?r.createElement(I.a,{style:m}):r.createElement(L.a,{id:"relay-menu",style:m,className:n?"unread":""}))):r.createElement(R,{label:"signup",cb:l})},D=n(261),W=function(){return(W=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},V=function(e){e.stopPropagation(),Object(S.g)({scene:"chat",userId:null,token:null})},A=function(e,t){t&&t.stopPropagation(),Object(S.g)({scene:e})},F=function(e){e.stopPropagation(),A("signup")},U=function(){return Object(S.g)({minimized:!0})},X=function(e){return e.stopPropagation()},G=function(e){return"@"+e.author_username+": "+e.text},J={left:{paddingLeft:20,color:"white",margin:0,alignSelf:"center",display:"flex",flexDirection:"column",position:"absolute",height:"100%",justifyContent:"center",cursor:"pointer"},right:{alignSelf:"center",display:"flex",position:"absolute",right:0,height:"100%",marginRight:10,alignItems:"center",justifyContent:"center"},channel:{color:f.h,fontSize:18,fontFamily:"Roboto",margin:0,maxWidth:220,padding:0,lineHeight:"inherit",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},iconWrapper:{boxShadow:"none",padding:0,height:"100%",width:35,display:"flex",justifyContent:"center",alignItems:"center"},icons:{display:"flex",height:"100%",position:"relative"},pin:{position:"relative",color:f.e,top:1,marginLeft:2,height:12},roomWrapper:{display:"flex",alignItems:"center",height:20,position:"relative"}},Y=Object(a.b)(function(e){var t=e.storage,n=e.inbox,r=e.room;return{pinned:!!t.pinnedRoom,loggedIn:!!t.token,minimized:t.minimized,numUnread:n.numUnread,room:r.name,numOnline:r.numOnline,pinnedMessage:r.pinnedMessage,numOnlineRelayWide:r.numOnlineRelayWide,uri:t.uri}},function(e){return{resetRoom:function(t){return e(Object(T.j)(t))}}})(function(e){var t=e.room,n=e.numUnread,a=e.loggedIn,l=e.pinnedMessage,o=e.numOnline,c=e.numOnlineRelayWide,s=e.pinned;Object(z.a)();var u=Object(D.a)(),f=u.togglePopup,p=u.isPopupOpen,g=r.useCallback(function(e){e.preventDefault(),function(e,t){var n=s?null:t;Object(S.g)({pinnedRoom:n})}(0,t)},[s,t]),v=r.useCallback(function(e){if(h.b||d.a)return function(e){e.stopPropagation(),A("inbox")}(e);f(e)},[f]);return r.createElement("div",{style:_.e,onClick:U,id:"relay-nav-bar"},r.createElement("div",{style:J.left},r.createElement("div",{style:J.roomWrapper},r.createElement("p",{style:J.channel},t),l&&r.createElement(E,{style:J.pin,"data-tip":G(l)})),r.createElement(x,{numOnline:o,numOnlineRelayWide:c})),r.createElement("div",{style:W({},J.right,{marginRight:a?7:5}),id:"nav-items",onClick:X},d.a?a&&r.createElement(R,{label:"logout",cb:V}):r.createElement("div",{style:W({},J.icons,{left:a?-4:5})},!h.b&&r.createElement(b,{pinned:s,goToScene:A,pinRoom:g}),r.createElement(i.a,{style:W({},J.iconWrapper,{right:a?"initial":3,marginRight:h.b?8:0}),onClick:A.bind(null,"trending"),title:"trending"},r.createElement(y.a,{id:"trending-button",style:m}))),r.createElement(B,{loggedIn:a,numUnread:n,onClick:v,authOnClick:F})),p&&r.createElement(w,{goToInbox:A.bind(null,"inbox"),goToShare:A.bind(null,"share"),goToSettings:A.bind(null,"settings"),unread:!!n}))}),q=n(308),K={container:{display:"flex",flex:1,width:h.b?"100%":375,alignItems:"center",justifyContent:"flex-end",backgroundColor:f.b,flexDirection:"column"},flag:{height:190},plant:{fontFamily:"Roboto",fontSize:30,textAlign:"center",margin:"auto 0",padding:"0 28px",lineHeight:1.4,color:f.h}},Q=function(){return r.createElement("div",{style:K.container},r.createElement("p",{style:K.plant},"Tell the universe you were here."),r.createElement("img",{src:"https://relaycdn.sfo2.digitaloceanspaces.com/flag.svg",style:K.flag,alt:"flag"}))},Z=n(102),$=n(285),ee=function(e){var t=e.channel,n=e.messages,a=e.paginable,l=e.addMessagesAction,i=e.chatBodyOffset,o=e.closePicker,c=e.isPickerOpen,s=e.openPicker;return t?n.length?r.createElement(q.a,{messages:n,channel:t,paginable:a,addMessages:$.a.bind(null,{addMessagesAction:l,messages:n,channel:t}),offset:i,openPicker:s,closePicker:o,isPickerOpen:c}):r.createElement(Q,null):r.createElement(Z.a,null)},te=n(307),ne=n(286),re=n(287),ae=n(103),le=n(26),ie=n(27);t.default=Object(a.b)(function(e){var t=e.storage,n=e.room,r=e.socket;return{pinnedRoom:t.pinnedRoom,uri:t.uri,history:t.history,room:n.name,messages:n.messages,channel:n.channel,paginable:n.paginable,loggedIn:!!t.token,socket:r}},function(e){return{addMessagesAction:function(t){var n=t.messages,r=t.paginable;return e(Object(T.a)({messages:n,paginable:r}))},resetRoom:function(t){return e(Object(T.j)(t))},loadStorage:function(){return function(e,t,n,r){return new(n||(n=Promise))(function(a,l){function i(e){try{c(r.next(e))}catch(e){l(e)}}function o(e){try{c(r.throw(e))}catch(e){l(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,o)}c((r=r.apply(e,t||[])).next())})}(void 0,void 0,void 0,function(){var t;return function(e,t){var n,r,a,l,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function o(l){return function(o){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,o])}}}(this,function(n){switch(n.label){case 0:return t=e,[4,Object(S.c)()];case 1:return[2,t.apply(void 0,[n.sent()])]}})})}}})(Object(l.a)(function(e){var t=e.room,n=e.channel,a=e.messages,l=e.paginable,i=e.addMessagesAction,o=e.history,c=e.loggedIn,s=Object(re.a)(),u=s.closePicker,d=s.renderPicker,f=s.isPickerOpen,p=s.openPicker,m=Object(ne.a)(),g=m.onInputHeightChange,h=m.chatBodyOffset,b=r.useCallback(function(e,r){if(!c)return Object(S.g)({scene:"signup"}),o.push({pathname:"/signup",state:{authReason:"chat"}});e.replace("\n","").length&&n&&n.push("new_message",{text:e}).receive("ok",function(e){Object(ie.b)("Chat","Message",t),r(),Object.keys(e).length&&Object(ae.b)(e)}).receive("error",function(e){var t=e.reason;"unauthorized"===t?o.push({pathname:"/signup",state:{authReason:"chat"}}):"rate_limited"===t?Object(le.f)():Object(le.c)()})},[o,n,c]);return r.createElement("div",{style:_.c,onClick:u},r.createElement(Y,null),r.createElement(ee,{channel:n,messages:a,paginable:l,addMessagesAction:i,chatBodyOffset:h,closePicker:u,isPickerOpen:f,openPicker:p}),r.createElement(te.a,{room:t,channel:n,onHeightChange:g,onSubmit:b,closePicker:u,isPickerOpen:f,openPicker:p}),d())}))}}]);